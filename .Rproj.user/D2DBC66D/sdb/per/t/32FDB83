{
    "contents" : "require(\"jsonlite\")\nrequire(\"RCurl\")\nrequire(ggplot2)\nrequire(dplyr)\n\nKPI_average = 10000     \nKPI_great = 1000\n\ndf <- data.frame(fromJSON(getURL(URLencode(gsub(\"\\n\", \" \", 'skipper.cs.utexas.edu:5001/rest/native/?query=\n\"select EMH, DISTRICTNAME, kpi,\ncase\nwhen kpi < \"p1\" then \\\\\\'Great\\\\\\'\nwhen kpi < \"p2\" then \\\\\\'Average\\\\\\'\nelse \\\\\\'Ok\\\\\\'\nend kpi\nfrom (select EMH, DISTRICTNAME, sum(RANK_TOT) as kpi\n  from FINAL_GRADE \n  group by EMH, DISTRICTNAME)\norder by DISTRICTNAME;\"\n')), httpheader=c(DB='jdbc:oracle:thin:@sayonara.microlab.cs.utexas.edu:1521:orcl', USER='C##cs329e_mh42375', PASS='orcl_mh42375', MODE='native_mode', MODEL='model', returnDimensions = 'False', returnFor = 'JSON', p1=KPI_great, p2=KPI_average), verbose = TRUE)))\n\np <- ggplot() + \n  coord_cartesian() + \n  scale_x_discrete() +\n  scale_y_discrete() +\n  labs(title='EMH and District Name Crosstab') +\n  labs(x=paste(\"DISTRICTNAME\"), y=paste(\"EMH\")) +\n  layer(data=df, \n        mapping=aes(x=DISTRICTNAME, y=EMH, label=KPI), \n        stat=\"identity\", \n        stat_params=list(), \n        geom=\"text\",\n        geom_params=list(colour=\"black\"), \n        position=position_identity()\n  ) +\n  layer(data=df, \n        mapping=aes(x=DISTRICTNAME, y=EMH, fill=KPI.1), \n        stat=\"identity\", \n        stat_params=list(), \n        geom=\"tile\",\n        geom_params=list(alpha=0.50), \n        position=position_identity()\n  )\nprint(p)\n",
    "created" : 1448171532493.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1151690461",
    "id" : "32FDB83",
    "lastKnownWriteTime" : 1448171946,
    "path" : "~/DataVisualization/DV_TProject1/03 R SQL Visualisations/Crosstab.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 7,
    "source_on_save" : false,
    "type" : "r_source"
}